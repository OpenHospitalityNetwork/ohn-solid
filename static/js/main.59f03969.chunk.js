(this["webpackJsonpohn-solid-client"]=this["webpackJsonpohn-solid-client"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},185:function(e,t){},207:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(48),u=n.n(a),i=(n(129),n(130),n(45)),o=function(){return Object(i.b)()},s=i.c,d=n(7),l=n(0),f=n.n(l),b=n(2),p=n(14),j=n(70),h=n(42),O=n(46),v=n(54),x=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,a,u,i,o,s,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)(t,{fetch:O.fetch});case 2:if(n=e.sent,!(r=Object(h.d)(n,t))){e.next=17;break}if(i=null!==(c=Object(h.b)(r,v.b.fn)||Object(h.b)(r,v.a.name))&&void 0!==c?c:"",!(o=null!==(a=Object(h.e)(r,v.b.hasPhoto))&&void 0!==a?a:"")){e.next=13;break}return e.next=10,m(o);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0="";case 14:return s=e.t0,d=null!==(u=Object(h.b)(r,v.b.note)||Object(h.c)(r,v.b.note,"en"))&&void 0!==u?u:"",e.abrupt("return",{id:t,name:i,avatar:s,about:d});case 17:return e.abrupt("return",{id:t,name:"",avatar:"",about:""});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.fetch)(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,c=URL.createObjectURL(r),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<40;n++)for(r=0;r<40;r++)t.push({id:"".concat(n,"_").concat(r),position:[160*(Math.random()-.5),360*(Math.random()-.5)],userId:""});return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"",position:[0,0],userId:t}]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(p.b)("offer/fetchOffers",Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),I=Object(p.b)("offer/getOffersOfUser",function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(p.c)({name:"offer",initialState:{byId:{},allIds:[]},reducers:{},extraReducers:function(e){e.addCase(y.fulfilled,(function(e,t){t.payload.forEach((function(t){e.byId[t.id]=t,e.allIds.push(t.id)}))}))}}),S=Object(j.a)((function(e){return e.offer}),(function(e){var t=e.byId;return e.allIds.map((function(e){return t[e]}))})),C=k.reducer,L=Object(p.b)("user/fetchUser",function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,x(t);case 3:return c=e.sent,r(I(t)),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(p.c)({name:"user",initialState:{byId:{},allIds:[]},reducers:{},extraReducers:function(e){e.addCase(L.fulfilled,(function(e,t){var n=t.payload;e.byId[n.id]=n,e.allIds.includes(n.id)||e.allIds.push(n.id)}))}}).reducer,U=Object(j.a)((function(e,t){return t}),(function(e){return e.user.byId}),(function(e,t){var n;return null!==(n=t[e])&&void 0!==n?n:{id:e,name:"",avatar:"",about:""}})),N=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.login)({oidcIssuer:t,redirectUrl:globalThis.location.href,clientName:"Open Hospitality Network"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.handleIncomingRedirect)({url:globalThis.location.href,restorePreviousSession:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.logout)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B={webId:"",isLoggedIn:!1,status:"pending"},E=Object(p.b)("login/login",N),M=Object(p.b)("login/init",function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,P();case 3:return(null===(c=e.sent)||void 0===c?void 0:c.isLoggedIn)&&(null===c||void 0===c?void 0:c.webId)&&r(L(c.webId)),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(p.b)("login/logout",A),z=Object(p.c)({name:"login",initialState:B,reducers:{},extraReducers:function(e){e.addCase(E.pending,(function(e){e.status="pending"})).addCase(E.fulfilled,(function(e){e.status="success"})).addCase(M.fulfilled,(function(e,t){var n,r,c,a;e.status="success",e.webId=null!==(n=null===(r=t.payload)||void 0===r?void 0:r.webId)&&void 0!==n?n:"",e.isLoggedIn=null!==(c=null===(a=t.payload)||void 0===a?void 0:a.isLoggedIn)&&void 0!==c&&c})).addCase(T.fulfilled,(function(e){e.isLoggedIn=B.isLoggedIn,e.status="success",e.webId=B.webId}))}}),J=function(e){return e.login},W=z.reducer,D=n(3),F=function(){var e=Object(r.useState)("https://solidcommunity.net"),t=Object(d.a)(e,2),n=t[0],c=t[1],a=o();return Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:"Sign in with your Solid Identity"}),Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(E(n))},children:[Object(D.jsx)("label",{htmlFor:"provider",children:"Select your Solid Pod Provider"}),Object(D.jsx)("input",{id:"provider",type:"text",value:n,onChange:function(e){return c(e.target.value)}}),Object(D.jsx)("input",{type:"submit",value:"Sign In"})]})]})},H=n(209),$=n(210),_=n(211),q=n(212),G=n(120),K=n.n(G),Q=(n(204),n(205),function(e){var t=e.points;return Object(D.jsxs)(H.a,{center:[54,23],zoom:10,style:{width:"100vw",height:"100vh"},children:[Object(D.jsx)($.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"}),Object(D.jsx)(K.a,{children:t.map((function(e){var t=e.id,n=e.position;return Object(D.jsx)(_.a,{position:n,children:Object(D.jsxs)(q.a,{children:["There will be a basic user ",t," info here, or not."]})},JSON.stringify(n))}))})]})}),V=function(){var e=s(S),t=o();return Object(r.useEffect)((function(){t(y())}),[t]),Object(D.jsx)(Q,{points:e})},X=n(61),Y=function(){var e=s(J),t=o();return Object(D.jsxs)("nav",{style:{position:"fixed",top:"1rem",right:"1em",zIndex:500},children:[Object(D.jsx)(X.b,{to:"/",children:"map"}),Object(D.jsx)("br",{}),Object(D.jsx)(X.b,{to:"/user/".concat(encodeURIComponent(e.webId)),children:e.webId}),Object(D.jsx)("br",{}),Object(D.jsx)("button",{onClick:function(){return t(T())},children:"Logout"})]})},Z=n(11),ee=function(){var e=Object(Z.f)(),t=decodeURIComponent(e.webId),n=Object(i.c)((function(e){return U(e,t)}));return Object(D.jsxs)("div",{children:[Object(D.jsx)("p",{children:Object(D.jsx)("a",{href:n.id,children:n.name})}),Object(D.jsx)("p",{children:Object(D.jsx)("img",{src:n.avatar,alt:"Image of ".concat(n.name)})}),Object(D.jsx)("p",{children:n.about})]})};var te=function(){var e=s(J),t=o();return Object(r.useEffect)((function(){t(M())}),[t]),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)("header",{className:"App-header",children:"pending"===e.status?Object(D.jsx)("i",{children:"Loading"}):e.isLoggedIn?Object(D.jsxs)(X.a,{children:[Object(D.jsx)(Y,{}),Object(D.jsxs)(Z.c,{children:[Object(D.jsx)(Z.a,{path:"/user/:webId",children:Object(D.jsx)(ee,{})}),Object(D.jsx)(Z.a,{path:"/",children:Object(D.jsx)(V,{})})]})]}):Object(D.jsx)(F,{})})})};function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var re=Object(p.b)("counter/fetchCount",function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=Object(p.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(re.pending,(function(e){e.status="loading"})).addCase(re.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),ae=ce.actions,ue=(ae.increment,ae.decrement,ae.incrementByAmount,ce.reducer),ie=Object(p.a)({reducer:{offer:C,user:R,counter:ue,login:W}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(i.a,{store:ie,children:Object(D.jsx)(te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.59f03969.chunk.js.map