(this["webpackJsonpohn-solid-client"]=this["webpackJsonpohn-solid-client"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(25),o=n.n(i),a=(n(65),n(66),n(30)),u=function(){return Object(a.b)()},s=a.c,d=n(22),l=n(11),f=n(1),b=n.n(f),p=n(8),j=n(36),h=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.login)({oidcIssuer:t,redirectUrl:globalThis.location.href,clientName:"Open Hospitality Network"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.handleIncomingRedirect)({url:globalThis.location.href,restorePreviousSession:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.logout)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={webId:"",isLoggedIn:!1,status:"pending"},m=Object(l.b)("login/login",h),x=Object(l.b)("login/init",v),w=Object(l.b)("login/logout",O),y=Object(l.c)({name:"login",initialState:g,reducers:{},extraReducers:function(e){e.addCase(m.pending,(function(e){e.status="pending"})).addCase(m.fulfilled,(function(e){e.status="success"})).addCase(x.fulfilled,(function(e,t){var n,r,c,i;e.status="success",e.webId=null!==(n=null===(r=t.payload)||void 0===r?void 0:r.webId)&&void 0!==n?n:"",e.isLoggedIn=null!==(c=null===(i=t.payload)||void 0===i?void 0:i.isLoggedIn)&&void 0!==c&&c})).addCase(w.fulfilled,(function(e){e.isLoggedIn=g.isLoggedIn,e.status="success",e.webId=g.webId}))}}),I=function(e){return e.login},S=y.reducer,k=n(2),C=function(){var e=Object(r.useState)("https://solidcommunity.net"),t=Object(d.a)(e,2),n=t[0],c=t[1],i=u();return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"Sign in with your Solid Identity"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(m(n))},children:[Object(k.jsx)("label",{htmlFor:"provider",children:"Select your Solid Pod Provider"}),Object(k.jsx)("input",{id:"provider",type:"text",value:n,onChange:function(e){return c(e.target.value)}}),Object(k.jsx)("input",{type:"submit",value:"Sign In"})]})]})},L=n(123),N=n(124),A=n(125),B=n(126),E=n(60),M=n.n(E),P=(n(119),n(120),function(e){var t=e.points;return Object(k.jsxs)(L.a,{center:[54,23],zoom:10,style:{width:"100vw",height:"100vh"},children:[Object(k.jsx)(N.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"}),Object(k.jsx)(M.a,{children:t.map((function(e){var t=e.id,n=e.position;return Object(k.jsx)(A.a,{position:n,children:Object(k.jsxs)(B.a,{children:["There will be a basic user ",t," info here, or not."]})},JSON.stringify(n))}))})]})}),R=n(35),T=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<40;n++)for(r=0;r<40;r++)t.push({id:"".concat(n,"_").concat(r),position:[160*(Math.random()-.5),360*(Math.random()-.5)]});return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=Object(l.b)("offer/fetchOffers",Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),J=Object(l.c)({name:"offer",initialState:{byId:{},allIds:[]},reducers:{},extraReducers:function(e){e.addCase(z.fulfilled,(function(e,t){t.payload.forEach((function(t){e.byId[t.id]=t,e.allIds.push(t.id)}))}))}}),F=Object(R.a)((function(e){return e.offer}),(function(e){var t=e.byId;return e.allIds.map((function(e){return t[e]}))})),W=J.reducer,D=function(){var e=s(F),t=u();return Object(r.useEffect)((function(){t(z())}),[t]),Object(k.jsx)(P,{points:e})},H=function(){var e=s(I),t=u();return Object(k.jsxs)("nav",{style:{position:"fixed",top:"1rem",right:"1em",zIndex:500},children:[Object(k.jsx)("button",{children:e.webId}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return t(w())},children:"Logout"})]})};var U=function(){var e=s(I),t=u();return Object(r.useEffect)((function(){t(x())}),[t]),Object(k.jsx)("div",{className:"App",children:Object(k.jsx)("header",{className:"App-header",children:"pending"===e.status?Object(k.jsx)("i",{children:"Loading"}):e.isLoggedIn?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H,{}),Object(k.jsx)(D,{})]}):Object(k.jsx)(C,{})})})};function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var _=Object(l.b)("counter/fetchCount",function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(l.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(_.pending,(function(e){e.status="loading"})).addCase(_.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),G=q.actions,K=(G.increment,G.decrement,G.incrementByAmount,q.reducer),Q=Object(l.a)({reducer:{offer:W,counter:K,login:S}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(a.a,{store:Q,children:Object(k.jsx)(U,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){},66:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.6f9c230a.chunk.js.map