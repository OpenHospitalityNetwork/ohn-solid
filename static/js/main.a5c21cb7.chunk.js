(this["webpackJsonpohn-solid-client"]=this["webpackJsonpohn-solid-client"]||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(31),o=n.n(i),a=(n(77),n(78),n(39)),s=function(){return Object(a.b)()},u=a.c,d=n(28),l=n(15),f=n(1),b=n.n(f),j=n(10),p=n(45),h=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.login)({oidcIssuer:t,redirectUrl:globalThis.location.href,clientName:"Open Hospitality Network"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.handleIncomingRedirect)({url:globalThis.location.href,restorePreviousSession:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.logout)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={webId:"",isLoggedIn:!1,status:"pending"},m=Object(l.b)("login/login",h),g=Object(l.b)("login/init",O),w=Object(l.b)("login/logout",v),y=Object(l.c)({name:"login",initialState:x,reducers:{},extraReducers:function(e){e.addCase(m.pending,(function(e){e.status="pending"})).addCase(m.fulfilled,(function(e){e.status="success"})).addCase(g.fulfilled,(function(e,t){var n,r,c,i;e.status="success",e.webId=null!==(n=null===(r=t.payload)||void 0===r?void 0:r.webId)&&void 0!==n?n:"",e.isLoggedIn=null!==(c=null===(i=t.payload)||void 0===i?void 0:i.isLoggedIn)&&void 0!==c&&c})).addCase(w.fulfilled,(function(e){e.isLoggedIn=x.isLoggedIn,e.status="success",e.webId=x.webId}))}}),I=function(e){return e.login},S=y.reducer,k=n(2),C=function(){var e=Object(r.useState)("https://solidcommunity.net"),t=Object(d.a)(e,2),n=t[0],c=t[1],i=s();return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"Sign in with your Solid Identity"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(m(n))},children:[Object(k.jsx)("label",{htmlFor:"provider",children:"Select your Solid Pod Provider"}),Object(k.jsx)("input",{id:"provider",type:"text",value:n,onChange:function(e){return c(e.target.value)}}),Object(k.jsx)("input",{type:"submit",value:"Sign In"})]})]})},L=n(135),R=n(136),N=n(137),A=n(138),B=n(71),E=n.n(B),M=(n(129),n(130),function(e){var t=e.points;return Object(k.jsxs)(L.a,{center:[54,23],zoom:10,style:{width:"100vw",height:"100vh"},children:[Object(k.jsx)(R.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"}),Object(k.jsx)(E.a,{children:t.map((function(e){var t=e.id,n=e.position;return Object(k.jsx)(N.a,{position:n,children:Object(k.jsxs)(A.a,{children:["There will be a basic user ",t," info here, or not."]})},JSON.stringify(n))}))})]})}),P=n(44),T=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<40;n++)for(r=0;r<40;r++)t.push({id:"".concat(n,"_").concat(r),position:[160*(Math.random()-.5),360*(Math.random()-.5)]});return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(l.b)("offer/fetchOffers",Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),z=Object(l.c)({name:"offer",initialState:{byId:{},allIds:[]},reducers:{},extraReducers:function(e){e.addCase(U.fulfilled,(function(e,t){t.payload.forEach((function(t){e.byId[t.id]=t,e.allIds.push(t.id)}))}))}}),J=Object(P.a)((function(e){return e.offer}),(function(e){var t=e.byId;return e.allIds.map((function(e){return t[e]}))})),W=z.reducer,D=function(){var e=u(J),t=s();return Object(r.useEffect)((function(){t(U())}),[t]),Object(k.jsx)(M,{points:e})},F=n(38),H=function(){var e=u(I),t=s();return Object(k.jsxs)("nav",{style:{position:"fixed",top:"1rem",right:"1em",zIndex:500},children:[Object(k.jsx)(F.b,{to:"/",children:"map"}),Object(k.jsx)("br",{}),Object(k.jsx)(F.b,{to:"/user/".concat(encodeURIComponent(e.webId)),children:e.webId}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return t(w())},children:"Logout"})]})},$=n(7),_=function(){var e=Object($.f)(),t=decodeURIComponent(e.webId);return Object(k.jsxs)("div",{children:["User ",t]})};var q=function(){var e=u(I),t=s();return Object(r.useEffect)((function(){t(g())}),[t]),Object(k.jsx)("div",{className:"App",children:Object(k.jsx)("header",{className:"App-header",children:"pending"===e.status?Object(k.jsx)("i",{children:"Loading"}):e.isLoggedIn?Object(k.jsxs)(F.a,{children:[Object(k.jsx)(H,{}),Object(k.jsxs)($.c,{children:[Object(k.jsx)($.a,{path:"/user/:webId",children:Object(k.jsx)(_,{})}),Object(k.jsx)($.a,{path:"/",children:Object(k.jsx)(D,{})})]})]}):Object(k.jsx)(C,{})})})};function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var K=Object(l.b)("counter/fetchCount",function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=Object(l.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(K.pending,(function(e){e.status="loading"})).addCase(K.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),V=Q.actions,X=(V.increment,V.decrement,V.incrementByAmount,Q.reducer),Y=Object(l.a)({reducer:{offer:W,counter:X,login:S}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(a.a,{store:Y,children:Object(k.jsx)(q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,n){},78:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.a5c21cb7.chunk.js.map